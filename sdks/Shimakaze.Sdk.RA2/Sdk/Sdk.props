<?xml version="1.0" encoding="UTF-8"?>
<Project
  ToolsVersion="4.0"
  DefaultTargets="Build"
  xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <ShimakazeSdkPath Condition=" '$(ShimakazeSdkPath)' == '' ">$(MSBuildThisFileDirectory)..</ShimakazeSdkPath>

    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">Vanilla</Platform>
    <Defines>$(Configuration.ToUpper());$(Platform.ToUpper());$(Defines)</Defines>

    <BaseIntermediateOutputPath Condition=" '$(BaseIntermediateOutputPath)' == '' ">obj</BaseIntermediateOutputPath>
    <IntermediateOutputPath Condition=" '$(IntermediateOutputPath)' == '' ">$(MSBuildProjectDirectory)\$(BaseIntermediateOutputPath)\$(Configuration)</IntermediateOutputPath>

    <BaseOutputPath Condition=" '$(BaseOutputPath)' == '' ">bin</BaseOutputPath>
    <OutputPath Condition=" '$(OutputPath)' == '' ">$(MSBuildProjectDirectory)\$(BaseOutputPath)\$(Configuration)</OutputPath>

    <CsfFileName Condition=" '$(CsfFileName)' == '' ">ra2md.csf</CsfFileName>
    <RulesIniFileName Condition=" '$(RulesIniFileName)' == '' ">rulesmd.ini</RulesIniFileName>
    <ArtsIniFileName Condition=" '$(ArtsIniFileName)' == '' ">artmd.ini</ArtsIniFileName>
    <MixFileName Condition=" '$(MixFileName)' == '' ">expandmd01.mix</MixFileName>
  </PropertyGroup>

  <ItemGroup>
    <IniFile Exclude="$(OutputPath)\**\*" Include="$(MSBuildProjectDirectory)\**\*.rule" Type="Rule" />
    <IniFile Exclude="$(OutputPath)\**\*" Include="$(MSBuildProjectDirectory)\**\*.art" Type="Art" />
    <CsfFile Exclude="$(OutputPath)\**\*" Include="$(MSBuildProjectDirectory)\**\*.csf" Type="Csf" />
    <CsfFile Exclude="$(OutputPath)\**\*" Include="$(MSBuildProjectDirectory)\**\*.csf.json" Type="Json" />
    <CsfFile Exclude="$(OutputPath)\**\*" Include="$(MSBuildProjectDirectory)\**\*.csf.v1.json" Type="JsonV1" />
    <CsfFile Exclude="$(OutputPath)\**\*" Include="$(MSBuildProjectDirectory)\**\*.csf.v2.json" Type="JsonV2" />
    <CsfFile Exclude="$(OutputPath)\**\*" Include="$(MSBuildProjectDirectory)\**\*.csf.xml" Type="Xml" />
    <CsfFile Exclude="$(OutputPath)\**\*" Include="$(MSBuildProjectDirectory)\**\*.csf.v1.xml" Type="XmlV1" />
    <CsfFile Exclude="$(OutputPath)\**\*" Include="$(MSBuildProjectDirectory)\**\*.csf.yaml" Type="Yaml" />
    <CsfFile Exclude="$(OutputPath)\**\*" Include="$(MSBuildProjectDirectory)\**\*.csf.yml" Type="Yaml" />
    <CsfFile Exclude="$(OutputPath)\**\*" Include="$(MSBuildProjectDirectory)\**\*.csf.v1.yaml" Type="YamlV1" />
    <CsfFile Exclude="$(OutputPath)\**\*" Include="$(MSBuildProjectDirectory)\**\*.csf.v1.yml" Type="YamlV1" />
    <CsfFile Update="$(IntermediateOutputPath)\**\*.csf" Type="Csf" SkipBuild="True" Merge="True" />
    <IniFile Update="$(IntermediateOutputPath)\**\*.rule" Type="Rule" SkipPreprocess="True" />
    <IniFile Update="$(IntermediateOutputPath)\**\*.art" Type="Art" SkipPreprocess="True" />
  </ItemGroup>

  <UsingTask AssemblyFile="$(ShimakazeSdkPath)\lib\Shimakaze.Sdk.Build.dll" TaskName="Shimakaze.Sdk.Build.CsfBuilder" />
  <UsingTask AssemblyFile="$(ShimakazeSdkPath)\lib\Shimakaze.Sdk.Build.dll" TaskName="Shimakaze.Sdk.Build.CsfMerger" />
  <UsingTask AssemblyFile="$(ShimakazeSdkPath)\lib\Shimakaze.Sdk.Build.dll" TaskName="Shimakaze.Sdk.Build.IniPreprocessor" />
  <UsingTask AssemblyFile="$(ShimakazeSdkPath)\lib\Shimakaze.Sdk.Build.dll" TaskName="Shimakaze.Sdk.Build.IniMerger" />
  <UsingTask AssemblyFile="$(ShimakazeSdkPath)\lib\Shimakaze.Sdk.Build.dll" TaskName="Shimakaze.Sdk.Build.MixPacker" />

</Project>